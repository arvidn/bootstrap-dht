import feature : feature ;

lib boost-system : : <target-os>darwin <name>boost_system-mt <search>/opt/local/lib : : <include>/opt/local/include ;
lib boost-system : : <name>boost_system ;

feature client_stats : off on : composite propagated ;
feature.compose <client_stats>on : <define>CLIENTS_STAT=1 ;

feature debug_stats : off on : composite propagated ;
feature.compose <debug_stats>on : <define>DEBUG_STATS=1 ;

project
	: requirements
	<threading>multi
	<include>src
	<library>boost-system
	: default-build
	<link>static
	<threading>multi
	<cxxstd>14
	;

exe dht-bootstrap : src/main.cpp src/bdecode.cpp src/city.cc src/ip_set.cpp ;
exe dht-torture : src/dht-torture.cpp src/bdecode.cpp ;
exe print_ips : src/print_ips.cpp ;

install stage : dht-bootstrap dht-torture print_ips : <location>. ;
